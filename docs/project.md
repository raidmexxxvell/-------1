# –ê–Ω–∞–ª–∏–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã: –õ–∏–≥–∞ –û–±–Ω–∏–Ω—Å–∫–∞

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–°—Ö–µ–º–∞—Ç–∏—á–Ω–æ–µ –¥–µ—Ä–µ–≤–æ (–¥–æ 3-–≥–æ —É—Ä–æ–≤–Ω—è):

- app.py ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, REST/WS API, —à–∞–±–ª–æ–Ω—ã –∏ —Å—Ç–∞—Ç–∏–∫–∞
- wsgi.py ‚Äî entrypoint —Å —Ä–∞–Ω–Ω–∏–º gevent monkey-patch
- render.yaml ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–µ–ø–ª–æ—è –Ω–∞ Render
- requirements.txt ‚Äî –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
- api/
  - admin.py ‚Äî –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∑–∞–∫–∞–∑–∞–º–∏, –º–∞—Ç—á–∏)
  - betting.py ‚Äî —Å—Ç–∞–≤–∫–∏ –∏ —Ä—ã–Ω–∫–∏
  - monitoring.py, security_test.py ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥/–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (blueprints)
- database/
  - database_api.py ‚Äî API-—Ä–æ—É—Ç—ã –¥–ª—è –Ω–æ–≤–æ–π –ë–î-—Å—Ö–µ–º—ã
  - database_models.py ‚Äî ORM-–º–æ–¥–µ–ª–∏ SQLAlchemy
  - database_schema.sql ‚Äî SQL-—Å—Ö–µ–º–∞
- optimizations/
  - multilevel_cache.py ‚Äî –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω—ã–π –∫—ç—à (in-memory/Redis)
  - websocket_manager.py ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä —Å–æ–±—ã—Ç–∏–π WS (topic-based + batching)
  - optimized_sheets.py, background_tasks.py ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏ —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
- services/
  - shop_helpers.py ‚Äî –º–∞–≥–∞–∑–∏–Ω (–∫–∞—Ç–∞–ª–æ–≥, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä–∑–∏–Ω—ã)
  - betting_settle.py, match_finalize.py, snapshots.py ‚Äî –¥–æ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞
- static/
  - css/ ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏, —Ç–µ–º—ã, splash
  - js/ ‚Äî –∫—Ä—É–ø–Ω—ã–π –Ω–∞–±–æ—Ä –º–æ–¥—É–ª–µ–π Vanilla JS –ø–æ —Ñ–∏—á–∞–º (profile-*, league, predictions, realtime, etag-fetch –∏ —Ç.–¥.)
  - img/ ‚Äî –∞—Å—Å–µ—Ç—ã (–ª–æ–≥–æ—Ç–∏–ø—ã –ª–∏–≥, –∏–∫–æ–Ω–∫–∏, —Ñ–æ–Ω—ã –ø—Ä–æ—Ñ–∏–ª—è)
- templates/
  - index.html ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å SPA (Vanilla JS), –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
  - admin_dashboard.html ‚Äî –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã
- utils/ ‚Äî –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã, middleware, –º–µ—Ç—Ä–∏–∫–∏, (–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏) –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
- docs/ ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—Ç–µ–∫—É—â–∏–π —Ñ–∞–π–ª)

–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π:
- templates ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã Jinja, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `index.html` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ ¬´SPA –Ω–∞ —Å–∫—Ä–∏–ø—Ç–∞—Ö¬ª –±–µ–∑ —Å–±–æ—Ä—â–∏–∫–∞.
- static/js ‚Äî –º–æ–¥—É–ª–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —Ä–∞–∑–±–∏—Ç—ã –ø–æ —Ñ–∏—á–∞–º (–ø—Ä–æ—Ñ–∏–ª—å, –ø—Ä–æ–≥–Ω–æ–∑—ã, —Ç–∞–±–ª–∏—Ü—ã, –ª–∏–¥–µ—Ä—ã, –º–∞–≥–∞–∑–∏–Ω, real-time –∏ —Ç.–¥.).
- static/css ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –∏ —Ç–µ–º—ã –Ω–∞ CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –±–µ–∑ –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤.
- api, services, database, optimizations ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —Å–ª–æ–∏ API/–¥–æ–º–µ–Ω/ORM/–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–∞ –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ —ç—Ç–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤.

–ü—Ä–∏–Ω—Ü–∏–ø—ã –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞:
- Feature-based (–ø–æ —Ñ–∏—á–∞–º): –º–Ω–æ–∂–µ—Å—Ç–≤–æ –º–æ–¥—É–ª–µ–π `profile-*`, `match-*`, `predictions-*`, `shop.js`, `league.js` –∏ —Ç.–¥.
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è ¬´–ø–ª–∏—Ç–∫–∞¬ª —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π, –±–µ–∑ —è–≤–Ω–æ–≥–æ —Å–±–æ—Ä—â–∏–∫–∞/—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.
- –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –æ—Ç–¥–µ–ª—å–Ω–æ (`etag-fetch.js`, `helpers.js`, `match-utils.js`, `team-utils.js`).

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- –§—Ä–µ–π–º–≤–æ—Ä–∫: Flask 2.3.3 (—Å–µ—Ä–≤–µ—Ä) + Vanilla JavaScript (–∫–ª–∏–µ–Ω—Ç)
- –Ø–∑—ã–∫–∏: Python 3.12 (—Å–µ—Ä–≤–µ—Ä), JavaScript (ES6+), HTML, CSS
- –†–µ–∞–ª—Ç–∞–π–º: Socket.IO (–∫–ª–∏–µ–Ω—Ç 4.7.2 —á–µ—Ä–µ–∑ CDN) + flask-socketio 5.3.6
- –ë–î: PostgreSQL (SQLAlchemy 2.x), Alembic
- –ö—ç—à/–æ—á–µ—Ä–µ–¥–∏: Redis (—á–µ—Ä–µ–∑ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π multilevel cache), in-memory –±–∞—Ç—á–∏–Ω–≥ WS
- –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è: orjson (—Å–µ—Ä–≤–µ—Ä), JSON –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ + ETag
- –î–µ–ø–ª–æ–π: Render (gunicorn + geventwebsocket worker), wsgi.py —Å —Ä–∞–Ω–Ω–∏–º monkey-patching
- –°–±–æ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞: –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–±–µ–∑ Webpack/Vite), —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤ –∏–∑ `static/`
- CSS: —á–∏—Å—Ç—ã–π CSS, –¥–∏–∑–∞–π–Ω —á–µ—Ä–µ–∑ CSS Custom Properties (—Ç–µ–º—ã), –±–µ–∑ Sass/Less/Tailwind
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º: –ª–æ–∫–∞–ª—å–Ω–æ –≤ –º–æ–¥—É–ª—è—Ö + LocalStorage (SWR/ETag –∫—ç—à), in-memory —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (Map)

–û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–ø–æ requirements.txt ‚Äî —Å–µ—Ä–≤–µ—Ä):
- flask, flask-compress ‚Äî –±—ç–∫–µ–Ω–¥ –∏ gzip/br-—Å–∂–∞—Ç–∏–µ
- flask-socketio, python-socketio ‚Äî realtime-–∫–∞–Ω–∞–ª
- SQLAlchemy, alembic ‚Äî –ë–î –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
- psycopg[binary] ‚Äî –¥—Ä–∞–π–≤–µ—Ä PostgreSQL
- orjson ‚Äî –±—ã—Å—Ç—Ä–∞—è JSON-—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤
- gspread, google-auth ‚Äî (–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ) –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –∞–¥–º–∏–Ω‚Äë–∏–º–ø–æ—Ä—Ç–∞/—ç–∫—Å–ø–æ—Ä—Ç–∞; –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å –∏ –ø—É–±–ª–∏—á–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –æ—Ç –ë–î
- gevent, gevent-websocket ‚Äî worker –¥–ª—è WS
- redis ‚Äî –∫—ç—à –∏ pub/sub (–≤ —Ä–∞–º–∫–∞—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π)

–í–µ—Ä—Å–∏–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫:
- Socket.IO client 4.7.2 (–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ CDN –≤ —à–∞–±–ª–æ–Ω–µ)

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–±–æ—Ä–∫–∏/—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
- –ë–µ–∑ JS-–±–∞–Ω–¥–ª–µ—Ä–∞. –î–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ Render —Å gunicorn-–∫–æ–º–∞–Ω–¥–æ–π –∏ gevent websocket worker.
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-—Å–∫—Ä–∏–ø—Ç–æ–≤: —à–∞–±–ª–æ–Ω—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é "dist-first" –¥–ª—è —Ñ–∞–π–ª–æ–≤ —Å—Ç–æ—Ä–∞ (`/static/js/dist/store/*.js`) —Å —Ä–µ–∑–µ—Ä–≤–Ω—ã–º –ø–∞–¥–µ–Ω–∏–µ–º –Ω–∞ –ª–µ–≥–∞—Å–∏ (`/static/js/store/*.js`) –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –≤–∫–ª—é—á–∞—Ç—å TypeScript –±–µ–∑ –ø–æ–ª–æ–º–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞.
 - Render build: –≤–æ –≤—Ä–µ–º—è –¥–µ–ø–ª–æ—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è TypeScript (`npx tsc -p tsconfig.json`) —Å –≤—ã–≤–æ–¥–æ–º –≤ `static/js/dist`. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ `dist` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–∞–∫ ES‚Äë–º–æ–¥—É–ª–∏ (`type="module"`), –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–æ–¥—É–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback –Ω–∞ legacy. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–∂–Ω–æ –≤ DevTools ‚Üí Network: –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–ª—è—Ç—å—Å—è –∑–∞–ø—Ä–æ—Å—ã –∫ `/static/js/dist/store/*.js`.

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü–æ–¥—Ö–æ–¥ –∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ (–∫–ª–∏–µ–Ω—Ç):
- –ë–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. UI —Ä–∞–∑–º–µ—á–µ–Ω –≤ `index.html` –±–ª–æ–∫–∞–º–∏ ¬´–≤–∫–ª–∞–¥–æ–∫¬ª –∏ ¬´–ø–æ–¥–≤–∫–ª–∞–¥–æ–∫¬ª (—Ç–∞–±–æ–≤), –ª–æ–≥–∏–∫–∞ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏.
- –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞/–∑–∞–≥—Ä—É–∑–∫–∏/–æ–±—Ä–∞–±–æ—Ç–∫–∏ UI. –ü—Ä–∏–º–µ—Ä—ã: `league.js` (—Ç–∞–±–ª–∏—Ü–∞/—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞/—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ), `profile-*.js` (–ø—Ä–æ—Ñ–∏–ª—å, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, –ª–∞–π–≤-—Å–∫–æ—Ä—ã, —Å–æ–±—ã—Ç–∏—è), `predictions.js`, `shop.js`.

–ü–∞—Ç—Ç–µ—Ä–Ω—ã —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏:
- –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Å–µ—Ç–∏ –∏ –∫—ç—à–∞: `etag-fetch.js` —Ä–µ–∞–ª–∏–∑—É–µ—Ç SWR-–ø–æ–¥–æ–±–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å ETag/If-None-Match –∏ LocalStorage.
- –†–µ–∞–ª—Ç–∞–π–º —Å–ª–æ–π: `realtime-updates.js` –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç Socket.IO, —Å topic-based –ø–æ–¥–ø–∏—Å–∫–∞–º–∏, –±–∞—Ç—á–∏–Ω–≥–æ–º —Å–æ–±—ã—Ç–∏–∏ÃÜ –∏ –ª–æ–∫–∞–ª—å–Ω—ã–º –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤.
- –•–µ–ª–ø–µ—Ä—ã DOM/–æ—Ç—Ä–∏—Å–æ–≤–∫–∏: `league.js` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç batchAppend –∏ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—é —Ç—É—Ä–æ–≤/–º–∞—Ç—á–µ–π –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞.

–ü—Ä–∏–º–µ—Ä: SWR + ETag fetch (5‚Äì10 —Å—Ç—Ä–æ–∫)

```js
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç—ã SWR/ETag (—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –∫–æ–¥: static/js/etag-fetch.js)
fetchEtag('/api/leaderboard/predictors', {
  cacheKey: 'lb:predictors',
  swrMs: 60000,
  extract: j => j.items || []
}).then(({ data, updated }) => {
  if (updated) renderPredictors(data);
});
```

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
- –ë–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Å—Ç–æ—Ä–∏–Ω–≥–∞. –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤:
  - in-memory —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö –º–æ–¥—É–ª–µ–π (Map, –ø—Ä–æ—Å—Ç—ã–µ –æ–±—ä–µ–∫—Ç—ã) ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, `RealtimeUpdater.oddsVersions`, `MatchState` –≤ `league.js`;
  - LocalStorage –¥–ª—è –∫—ç—à–µ–π –∏ –æ—Ç–º–µ—Ç–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã ETag).
- –î–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ü–∏–π –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–æ–±—ã—Ç–∏—è DOM (CustomEvent) –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ –≤ `window.*` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `window.League`, `window.__VoteAgg`).

–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è API-—Å–ª–æ—è –∏ —Ä–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏:
- HTTP REST —Å ETag –∏ Cache-Control; –æ—Ç–≤–µ—Ç—ã —á–∞—Å—Ç–æ —Å–æ–¥–µ—Ä–∂–∞—Ç `version` (ETag) –∏ `updated_at` –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞.
- –í–∞–∂–Ω—ã–µ –ø—É–±–ª–∏—á–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã: —Ç–∞–±–ª–∏—Ü–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ/—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –¥–µ—Ç–∞–ª–∏ –º–∞—Ç—á–∞, —Å—Ç–∞–≤–∫–∏, –º–∞–≥–∞–∑–∏–Ω.
- –†–µ–∞–ª—Ç–∞–π–º-–∫–∞–Ω–∞–ª WS: —Å–æ–±—ã—Ç–∏—è `data_patch`, `topic_update`, `match_finished`, `live_update` —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ç—á–∞–º–∏ –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏ —Å—É—â–Ω–æ—Å—Ç–µ–π.

–ü–∞—Ç—Ç–µ—Ä–Ω—ã —Ä–æ—É—Ç–∏–Ω–≥–∞ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:
- SPA —Å —Ç–∞–±–∞–º–∏: –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ —á–µ—Ä–µ–∑ –∫–ª–∞—Å—Å—ã –∏ `display:none` –≤ DOM (—Å–º. `index.html`).
- Fallback-–Ω–∞–≤–∏–≥–∞—Ü–∏—è (`nav-fallback.js`) –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö WebView, –µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è.

–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ loading-—Å–æ—Å—Ç–æ—è–Ω–∏–π:
- –ü—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ª–æ–∞–¥–µ—Ä –∏ —Å–∫–µ–ª–µ—Ç–æ–Ω—ã –±–ª–æ–∫–æ–≤.
- –û—à–∏–±–∫–∏ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ `etag-fetch.js` –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∫—ç—à (–µ—Å–ª–∏ –µ—Å—Ç—å), –∏–Ω–∞—á–µ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—é—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.
- –ê–¥–º–∏–Ω-–æ–≤–µ—Ä–ª–µ–π –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ (–ø–æ Telegram user id) —á–µ—Ä–µ–∑ `error-overlay.js` (—Å–º. –≤—Å—Ç–∞–≤–∫—É –≤ —à–∞–±–ª–æ–Ω–µ).

## üé® UI/UX –∏ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è

- –ü–æ–¥—Ö–æ–¥ –∫ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏: —á–∏—Å—Ç—ã–π CSS, –¥–∏–∑–∞–π–Ω –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ CSS Custom Properties (`:root` –∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Ç–µ–º–∞ `body.blb-theme`).
- –ù–µ—Ç –≤–Ω–µ—à–Ω–µ–π –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã; –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—â–∏–π –≤–∏–∑—É–∞–ª—å–Ω—ã–π —è–∑—ã–∫: –∫–∞—Ä—Ç–æ—á–∫–∏, ¬´–ø–∞–Ω–µ–ª–∏ –ª–∏–≥–∏¬ª, –ø–æ–¥—Ç–∞–±—ã, —Ç–∞–±–ª–∏—Ü—ã.
- –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å: mobile-first, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç —à–∏—Ä–∏–Ω—É –¥–æ 600px; off-canvas –ø–∞–Ω–µ–ª–∏/–ø–æ–ª–∫–∏, –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–æ–Ω–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π —Å –º–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å–∞–º–∏.
- –¢–µ–º–∏–∑–∞—Ü–∏—è: —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤ –Ω–∞ `body` –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö. –û—Å–Ω–æ–≤–Ω–∞—è —Ç–µ–º–∞ ¬´UFO¬ª, –≤—Ç–æ—Ä–∏—á–Ω–∞—è ‚Äî ¬´BLB¬ª.
- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (a11y): –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è aria-–∞—Ç—Ä–∏–±—É—Ç—ã –≤ –º–æ–¥–∞–ª—å–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–∞—Ö (`aria-modal`, `role="dialog"`), `aria-live` –¥–ª—è –Ω–æ–≤–æ—Å—Ç–µ–π; –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ—Ç —Å–∏—Å—Ç–µ–º–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–æ–∫—É—Å–∞/–ª–æ–≤—É—à–µ–∫ —Ñ–æ–∫—É—Å–∞ ‚Äî –µ—Å—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –¥–ª—è —É–ª—É—á—à–µ–Ω–∏–π.

## ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

- –õ–∏–Ω—Ç–µ—Ä—ã/—Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã: –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ ESLint/Prettier/Stylelint –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.
- –°–æ–≥–ª–∞—à–µ–Ω–∏—è: –∏–º–µ–Ω–∞ –º–æ–¥—É–ª–µ–π –ø–æ —Ñ–∏—á–∞–º, –µ–¥–∏–Ω—ã–π –Ω–µ–π–º–∏–Ω–≥ `profile-*`, `match-*`, `league`, `helpers`, `*_utils`. –í–Ω—É—Ç—Ä–∏ –º–æ–¥—É–ª–µ–π —Å—Ç–∏–ª—å –≤ —Ü–µ–ª–æ–º –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–µ–Ω.
- TypeScript: –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.
- –¢–µ—Å—Ç—ã: —é–Ω–∏—Ç/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ/e2e —Ç–µ—Å—Ç—ã –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ –∫–æ–¥–µ: —É –∫–ª—é—á–µ–≤—ã—Ö —É—Ç–∏–ª–∏—Ç –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç JSDoc-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `RealtimeUpdater`), —É –º–Ω–æ–≥–∏—Ö –º–æ–¥—É–ª–µ–π ‚Äî –∫–æ—Ä–æ—Ç–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏/–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.

–í—ã–≤–æ–¥: —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ ‚Äî –∑—Ä–µ–ª–∞—è Vanilla JS –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞ –±–µ–∑ —Å–±–æ—Ä—â–∏–∫–∞. –ö–ª—é—á–µ–≤–æ–π –∞–∫—Ü–µ–Ω—Ç ‚Äî –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∏ —ç–∫–æ–Ω–æ–º–∏—è —Å–µ—Ç–∏.

## üîß –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1) etag-fetch.js ‚Äî SWR + ETag –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫—ç—à
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∏ —Ç—Ä–∞—Ñ–∏–∫; –ø–æ–¥–¥–µ—Ä–∂–∫–∞ If-None-Match –∏ LocalStorage –¥–ª—è —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
- –ú–∏–Ω–∏-API: `fetchEtag(url, { cacheKey, swrMs, extract, headers, params, forceRevalidate }) ‚Üí { data, etag, fromCache, updated }`.
- –ü—Ä–∏–º–µ—Ä (8 —Å—Ç—Ä–æ–∫):
```js
fetchEtag('/api/schedule', {
  cacheKey: 'league:schedule',
  swrMs: 30000,
  extract: j => (j.tours || j?.data?.tours || [])
}).then(({ data }) => renderSchedulePane(data));
```
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π fetch, LocalStorage.

2) realtime-updates.js ‚Äî RealtimeUpdater (Socket.IO)
- –†–æ–ª—å: –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ WS, reconnect —Å backoff, —Ç–æ–ø–∏–∫–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏, –ø–∞—Ç—á–∏ –¥–∞–Ω–Ω—ã—Ö, –≤–µ—Ä—Å–∏—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤.
- –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã: `initSocket()`, `setupEventHandlers()`, `handleDataPatch()`, `refresh*`, `subscribeTopic(topic)`.
- –ü—Ä–∏–º–µ—Ä (—Ñ—Ä–∞–≥–º–µ–Ω—Ç 12 —Å—Ç—Ä–æ–∫):
```js
this.socket.on('data_patch', (patch) => {
  const { entity, id, fields } = patch || {};
  if (entity === 'odds') {
    const { home, away, date } = typeof id === 'string'
      ? (() => { const [h,a,d]=id.split('_'); return {home:h, away:a, date:d}; })()
      : (id || {});
    const incomingV = fields?.odds_version ?? null;
    if (incomingV != null && incomingV > this._getOddsVersion(home, away))
      this._setOddsVersion(home, away, incomingV);
    this.refreshBettingOdds({ homeTeam: home, awayTeam: away, date, odds: { ...(fields||{}) } });
  }
});
```
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è `data_patch`, `topic_update`, localStorage (–∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–µ–π), DOM —Å–æ–±—ã—Ç–∏—è.

3) league.js ‚Äî —Ä–µ–Ω–¥–µ—Ä –ª–∏–≥–∏, –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –∏ –±–∞—Ç—á–∏–Ω–≥ DOM
- –†–æ–ª—å: –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–∞–±–ª–∏—Ü/—Å—Ç–∞—Ç—ã, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏ –∫–∞—Ä—Ç–æ—á–µ–∫ –º–∞—Ç—á–µ–π; batched append; –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Ç—É—Ä–æ–≤.
- –ü—Ä–∏–º–µ—Ä (—Ñ—Ä–∞–≥–º–µ–Ω—Ç 12 —Å—Ç—Ä–æ–∫):
```js
function batchAppend(parent, nodes, batchSize = 20) {
  let i = 0;
  function step() {
    if (i >= nodes.length) return;
    const frag = document.createDocumentFragment();
    for (let k = 0; k < batchSize && i < nodes.length; k++, i++)
      frag.appendChild(nodes[i]);
    parent.appendChild(frag);
    (window.requestAnimationFrame || window.setTimeout)(step, 0);
  }
  step();
}
```
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: —É—Ç–∏–ª–∏—Ç—ã `team-utils.js`, `match-utils.js`, –≥–ª–æ–±–∞–ª—å–Ω—ã–π `window.MatchState`, `window.__VoteAgg`.

4) nav-fallback.js ‚Äî –∞–≤–∞—Ä–∏–π–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –≤–∫–ª–∞–¥–æ–∫
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –æ–±–µ—Å–ø–µ—á–∏—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ –Ω–∞ ¬´–∫–∞–ø—Ä–∏–∑–Ω—ã—Ö¬ª WebView, –µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –Ω–µ –ø–æ–¥–Ω—è–ª—Å—è.
- –ü—Ä–∏–º–µ—Ä (8 —Å—Ç—Ä–æ–∫):
```js
const nav = document.querySelectorAll('.nav-item');
nav.forEach(it => {
  it.addEventListener('click', () => {
    document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
    it.classList.add('active');
    const tab = it.getAttribute('data-tab');
    ['home','ufo','predictions','leaderboard','shop','admin','profile']
      .forEach(id=>{ const el = document.getElementById('tab-'+id); if (el) el.style.display = (tab===id?'':'none'); });
  }, { passive:true });
});
```

5) profile-* (–¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, –ª–∞–π–≤-–º–∞—Ç—á, —Å–æ–±—ã—Ç–∏—è)
- –ú–æ–¥—É–ª–∏ —Å–µ–º–µ–π—Å—Ç–≤–∞ `profile-*.js` –æ—Ä–≥–∞–Ω–∏–∑—É—é—Ç —ç–∫—Ä–∞–Ω –ø—Ä–æ—Ñ–∏–ª—è, check-in, –±—ç–π–¥–∂–∏, live-–¥–∞–Ω–Ω—ã–µ –ø–æ –º–∞—Ç—á—É, –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –º–∞—Ç—á–∞.
- –û–±—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: —Ç–µ –∂–µ —É—Ç–∏–ª–∏—Ç—ã —Å–µ—Ç–∏/–∫—ç—à–∞, WS-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, —Ä–µ–Ω–¥–µ—Ä —Ç–∞–±–ª–∏—Ü.

6) admin-transfers.js ‚Äî —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞–º–∏ –∏–≥—Ä–æ–∫–æ–≤
- –†–æ–ª—å: –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏ –∏–≥—Ä–æ–∫–æ–≤ –º–µ–∂–¥—É –∫–æ–º–∞–Ω–¥–∞–º–∏ –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏.
- –§—É–Ω–∫—Ü–∏–∏: –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –∫–æ–º–∞–Ω–¥–∞–º, –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ –æ—á–µ—Ä–µ–¥–∏, –ø–∞–∫–µ—Ç–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π.
- API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: `/api/admin/players/transfer` (–µ–¥–∏–Ω–∏—á–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥), `/api/admin/transfers/news` (—Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏).
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `team_roster` –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ç–∞–±–ª–∏—Ü `team_stats_<id>` —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–≥—Ä–æ–∫–æ–≤.
- –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Üí –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞–º–∏):
  - –ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–∞ –ø–æ –∏–º–µ–Ω–∏ –≤–æ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥–∞—Ö
  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞ –≤ –æ—á–µ—Ä–µ–¥—å (–∏–≥—Ä–æ–∫ ‚Üí –Ω–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞)
  - –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤ —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤–æ—Å—Ç–∏ –æ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞—Ö
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `admin-enhanced.js` —á–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç `window.TransferManager`.

## üß© –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ best practices

- –°–µ—Ç—å/–∫—ç—à:
  - SWR + ETag, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π If-None-Match ‚Üí 304, –≤–æ–∑–≤—Ä–∞—Ç –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∫—ç—à–∞ –ø—Ä–∏ –æ—Ñ—Ñ–ª–∞–π–Ω–µ/–æ—à–∏–±–∫–µ.
  - –õ–æ–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –∫—ç—à–∞ –ø–æ —Ñ–∏—á–∞–º: `league:schedule`, `lb:predictors`, `voteAgg:...`.
- –†–µ–∞–ª—Ç–∞–π–º –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ UI:
  - Topic-based –ø–æ–¥–ø–∏—Å–∫–∏ (feature-flag), –±–∞—Ç—á–∏–Ω–≥ WS-—Å–æ–±—ã—Ç–∏–π –∏ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ (delay_ms –ø—Ä–∏ —ç–º–∏—Ç–∞—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ).
  - –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ odds —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –ø–∞—Ç—á–µ–π.
  - –ú—è–≥–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–µ–π –∏ —Ç–æ—á–µ—á–Ω—ã–µ —Ä–µ—Ñ–µ—Ç—á–∏ –ø–æ —Å–æ–±—ã—Ç–∏—è–º (`match_finished`, `match_events`).
- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
  - –ü–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–∞—è/—á–∞—Å—Ç–∏—á–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞: batchAppend, requestAnimationFrame/requestIdleCallback.
  - –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Ç—É—Ä–æ–≤ (–¥–µ—Ä–∂–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ DOM-–±–ª–æ–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ).
  - –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ (`loading=lazy`, `decoding=async`).
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å:
  - –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π backoff –ø—Ä–∏ reconnect WS.
  - –ó–∞—â–∏—Ç–Ω—ã–µ try/catch –≤–æ–∫—Ä—É–≥ –Ω–µ-–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —É—á–∞—Å—Ç–∫–æ–≤ (DOM, localStorage, JSON parse).
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:
  - –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è (—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä–∞, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤), –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ ‚Äî —Å—Ç—Ä–æ–≥–∞—è (decorators: validate_input –∏ —Ç.–¥.).
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è:
  - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ —Ä—É—Å—Å–∫–æ–º; –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã i18n –Ω–µ—Ç (–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª —É–ª—É—á—à–µ–Ω–∏—è).

## üß∞ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- package.json: –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–Ω–µ—Ç –Ω–æ–¥–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π/–±–∞–Ω–¥–ª–µ—Ä–∞).
- –°—Ä–µ–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: —á–∏—Å—Ç—ã–π Flask static + CDN; –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞ ‚Äî Render (autoDeploy), gunicorn+gevent-websocket.
- CI/CD: —è–≤–Ω–æ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–∫—Ä–æ–º–µ –∞–≤—Ç–æ-–¥–µ–ø–ª–æ—è Render), pre-commit hooks –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã.
- Docker: –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω.

## üìã –í—ã–≤–æ–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞: –±–∞—Ç—á–∏–Ω–≥/–≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è, –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è reflow.
- –≠–∫–æ–Ω–æ–º–∏—è —Å–µ—Ç–∏: ETag/SWR, —Ç–æ—á–µ—á–Ω—ã–µ WS-–ø–∞—Ç—á–∏, –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö.
- –ü—Ä–æ—Å—Ç–∞—è —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è: –±–µ–∑ –±–∞–Ω–¥–ª–µ—Ä–∞, —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–¥–∞—á–∞, —á–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π –ø–æ —Ñ–∏—á–∞–º.
- –•–æ—Ä–æ—à–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π (–∫—ç—à-–∏–Ω–≤–∞–ª–∏–¥–∞—Ç–æ—Ä, topic-based WS, gzip/br).

–ó–æ–Ω—ã —Ä–æ—Å—Ç–∞:
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ª–∏–Ω—Ç–µ—Ä—ã/—Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—è ‚Äî –ø–æ–≤—ã—Å–∏—Ç—å –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å —Å ESLint + Prettier; –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ TypeScript (–º–∏–≥—Ä–∞—Ü–∏—è –ø–æ—ç—Ç–∞–ø–Ω–æ).
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –±—ã—Å—Ç—Ä—ã–µ unit-—Ç–µ—Å—Ç—ã –¥–ª—è —É—Ç–∏–ª–∏—Ç (`etag-fetch`, —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã –¥–∞—Ç) –∏ smoke-—Ç–µ—Å—Ç—ã —Ä–µ–Ω–¥–µ—Ä–∞.
- A11y: —É–ª—É—á—à–∏—Ç—å —Ñ–æ–∫—É—Å-–ª–æ–≤—É—à–∫–∏ –≤ –º–æ–¥–∞–ª–∫–∞—Ö, –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é, aria-–º–µ—Ç–∫–∏ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
- –°—Ç–∞—Ç–∏–∫–∞: —Å–æ–±—Ä–∞—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥—É–ª–∏ –ø–æ–¥ –æ–¥–∏–Ω –±–∞–Ω–¥–ª (Vite) —Å code splitting –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü; —Å–Ω–∏–∑–∏—Ç—å —á–∏—Å–ª–æ <script> –≤ —à–∞–±–ª–æ–Ω–µ.
- –ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å: –≤–≤–µ—Å—Ç–∏ –ª—ë–≥–∫–∏–π –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –ª–æ–≥–≥–µ—Ä –æ—à–∏–±–æ–∫ (Sentry/otel) –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞.
- i18n: –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ (keys + –ø—Ä–æ—Å—Ç–æ–π runtime-—Å–ª–æ–π).

–£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞: middle ‚Üí senior friendly
- –î–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ —Ñ–∏—á–µ–≤–æ–π –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è JS/DOM/—Å–µ—Ç–∏.
- –î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –∏ WS-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π ‚Äî –±–ª–∏–∂–µ –∫ senior.

–ö–æ—Ä–æ—Ç–∫–∏–π –ø–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏–π (–≤–ª–∏—è–Ω–∏–µ):
- üîµ ESLint + Prettier –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (tech stability)
- üîµ Smoke-—Ç–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç –∏ —Ä–µ–Ω–¥–µ—Ä–∞ ¬´—Ç–∞–±–ª–∏—Ü–∞/—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ¬ª (tech stability)
- üîµ –í–∏—Ç–æ–π –±–∞–Ω–¥–ª core-—Å–∫—Ä–∏–ø—Ç–æ–≤ (Vite) —Å code splitting ¬´admin/predictions/profile¬ª (engagement, perf)
- ‚ö™ A11y —Ñ–æ–∫—É—Å/—Ä–æ–ª–µ–≤–∞—è —Å–µ–º–∞–Ω—Ç–∏–∫–∞ –≤ –º–æ–¥–∞–ª–∫–∞—Ö (retention)
- ‚ö™ –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å—Ç—Ä–æ–∫ (retention)

---

–ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –≤–∑—è—Ç—ã –∏–∑ —Ç–µ–∫—É—â–µ–π –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã: `static/js/etag-fetch.js`, `static/js/realtime-updates.js`, `static/js/league.js`, `templates/index.html`.

## ‚ÑπÔ∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ –±—ç–∫–µ–Ω–¥—É (–∫—Ä–∞—Ç–∫–æ)
- Flask + SQLAlchemy, PostgreSQL; ETag –Ω–∞ –º–Ω–æ–≥–∏—Ö –æ—Ç–≤–µ—Ç–∞—Ö; gunicorn + geventwebsocket; Render autoDeploy.
- Topic-based WebSockets —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `optimizations.websocket_manager.WebSocketManager`.

## ‚úÖ –ö—Ä–∞—Ç–∫–∞—è ¬´quality gates¬ª —Å–≤–æ–¥–∫–∞
- Build —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞: –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–¥–∞—á–∞). PASS
- –õ–∏–Ω—Ç/—Ç–∏–ø–∏–∑–∞—Ü–∏—è: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ã –∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é. N/A
- –¢–µ—Å—Ç—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ã –∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é. N/A
- –°–º–æ—É–∫-–ø—Ä–æ–≤–µ—Ä–∫–∞: —à–∞–±–ª–æ–Ω `index.html` —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–∫—Ä–∏–ø—Ç—ã. PASS

Requirements coverage:
- –û–±–∑–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, —Å—Ç–µ–∫, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã, —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è, –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞, –∫–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å –∫–æ–¥–æ–º, best practices, –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Äî Done.

## üì∑ –ü–æ—Ç–æ–∫ –∞–≤–∞—Ç–∞—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (UserPhoto)

- –ö–ª–∏–µ–Ω—Ç –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç `/api/user` —Å Telegram initData (—á–µ—Ä–µ–∑ `profile-*.js`).
- –î–µ–∫–æ—Ä–∞—Ç–æ—Ä `require_telegram_auth` –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç initData –∏ –∫–ª–∞–¥—ë—Ç –¥–∞–Ω–Ω—ã–µ –≤ `flask.g.auth_data`.
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `/api/user` –∑–µ—Ä–∫–∞–ª–∏—Ä—É–µ—Ç `photo_url` –≤ —Ç–∞–±–ª–∏—Ü—É `user_photos` (upsert –ø–æ `user_id`).
- –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã `/api/user/avatars` –∏ `/api/users/public-batch` —á–∏—Ç–∞—é—Ç `photo_url` –∏–∑ `user_photos` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ ¬´–ü—Ä–∏–∑—ã¬ª –∏ –≤ –æ–≤–µ—Ä–ª–µ—è—Ö.

–ò–∑–º–µ–Ω–µ–Ω–∏–µ: –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–ø–µ—Ä—å –±–µ—Ä—ë—Ç `photo_url` –∏–∑ `g.auth_data` (fallback ‚Äî –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ `parsed`), —á—Ç–æ–±—ã –∑–∞–ø–∏—Å—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä.
