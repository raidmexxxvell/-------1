# Архив достижений — полный каталог

Дата: 20.09.2025

В этом документе собраны все текущие достижения, их уровни (Бронза/Серебро/Золото), способ получения и подробные описания. Лучший достигнутый уровень по каждой категории сохраняется навсегда. Награды (XP и кредиты) выдаются один раз при каждом повышении тира.

Примечание об учёте прогресса:
- Данные берутся из вашего профиля и истории ставок. Для некоторых категорий используются агрегаты (например, «уникальные недели активности» или «число разных рынков»).
- При подсчёте приглашённых учитываются только те друзья, которые достигли как минимум 2-го уровня (борьба с накруткой).
- При подсчёте «разных рынков» некоторые спец-рынки объединяются (например, penalty/redcard → specials).

Награды за уровни (единые для всех категорий):
- Бронза: +200 XP, +1000 кредитов
- Серебро: +500 XP, +5000 кредитов
- Золото: +1000 XP, +10000 кредитов

---

## 1) Серия входов (streak)
- Уровни:
  - Бронза — 7 дней подряд
  - Серебро — 30 дней подряд
  - Золото — 120 дней подряд
- Как получить: заходите в приложение ежедневно без пропусков. Любой пропуск прерывает серию.
- Подробно: достижение отражает вашу регулярность. Чем дольше вы поддерживаете непрерывную серию посещений, тем выше уровень. Полезно для выработки привычки и получения дополнительных наград за длительные серии.

## 2) Кредиты на балансе (credits)
- Уровни (уникальные названия):
  - «Бедолага» — 10 000 кредитов
  - «Мажор» — 50 000 кредитов
  - «Олигарх» — 500 000 кредитов
- Как получить: накапливайте кредиты за активность в приложении и получайте бонусы за другие достижения.
- Подробно: учитывается текущий баланс кредитов. Достижение повышается по мере роста вашего «капитала». Кредиты можно зарабатывать через игровые механики (чекины, достижения и т.д.).

## 3) Уровень пользователя (level)
- Уровни (уникальные названия):
  - «Новобранец» — достичь 25 уровня
  - «Ветеран» — достичь 50 уровня
  - «Легенда» — достичь 100 уровня
- Как получить: набирайте XP, участвуя в активности, чекинах, разблокируя достижения и т.п. При накоплении достаточного XP уровень повышается.
- Подробно: стоимость следующего уровня растёт линейно (стоимость = текущий уровень × 100 XP). Набранный XP «перетекает» на новый уровень; лишние очки не пропадают.

## 4) Приглашения друзей (invited)
- Уровни (уникальные названия):
  - «Рекрутер» — 10 приглашённых (каждый с уровнем ≥ 2)
  - «Посол» — 50 приглашённых (уровень ≥ 2)
  - «Легенда» — 150 приглашённых (уровень ≥ 2)
- Как получить: делитесь реферальной ссылкой. В зачёт идут друзья, которые достигли хотя бы 2 уровня (фильтр против спама и ботов).
- Подробно: учитывается число активных друзей. Чем больше вовлечённых приглашённых, тем выше ваш уровень «амбассадора».

## 5) Количество ставок (betcount)
- Уровни (уникальные названия):
  - «Новичок ставок» — 10 ставок
  - «Профи ставок» — 50 ставок
  - «Марафонец» — 200 ставок
- Как получить: делайте ставки на матчи.
- Подробно: считает общее количество совершённых ставок независимо от исхода. Стимулирует регулярную игру и опыт.

## 6) Выигранные ставки (betwins)
- Уровни (уникальные названия):
  - «Счастливчик» — 5 выигранных ставок
  - «Снайпер» — 20 выигранных ставок
  - «Чемпион» — 75 выигранных ставок
- Как получить: выигрывайте ставки. В зачёт идут только ставки со статусом «won».
- Подробно: достижение фиксирует вашу результативность. Подходит для тех, кто стабильно делает верные прогнозы.

## 7) Крупный коэффициент (bigodds)
- Уровни (уникальные названия):
  - «Рисковый» — выигрыш при кэфе ≥ 3.0
  - «Хайроллер» — выигрыш при кэфе ≥ 4.5
  - «Легенда кэфов» — выигрыш при кэфе ≥ 6.0
- Как получить: выиграйте ставку с коэффициентом не ниже указанного порога. Учитывается ваш максимальный выигранный кэф за всё время.
- Подробно: отражает «смелые» победы. Достижение повышается, когда ваш новый максимум выигрыша по коэффициенту превышает следующий порог.

## 8) Разнообразие рынков (markets)
- Уровни (уникальные названия):
  - «Универсал I» — 2 разных рынка
  - «Универсал II» — 3 разных рынка
  - «Универсал III» — 4 разных рынка
- Как получить: используйте разные типы рынков в ставках (например, 1x2, тоталы, форы, спецпари). Некоторые рынки могут объединяться в «specials» (например, penalty/redcard).
- Подробно: учитывается количество уникальных рынков, на которых вы делали ставки. Разнообразие повышает игровой кругозор.

## 9) Активные недели (weeks)
- Уровни (уникальные названия):
  - «Регуляр» — 2 активные недели
  - «Постоянный» — 5 активных недель
  - «Железный» — 10 активных недель
- Как получить: делайте хотя бы одну ставку в разные календарные недели. В зачёт идут уникальные недели, в которых вы были активны.
- Подробно: достижение фиксирует «ритм» вашей активности. Подходит тем, кто стабильно возвращается и играет каждую неделю.

---

### Частые вопросы
- Можно ли потерять уровень достижения?
  - Нет. Достижения перманентны: как только вы достигли определённого уровня (тир), он сохраняется навсегда.
- Что если я превысил несколько порогов сразу?
  - Будут учтены все повышенные уровни, и вы получите суммарные награды за каждый новый тир (по одному разу для каждого тира).
- Начисляются ли награды повторно?
  - Нет. За каждый (категория, тир) награда выдаётся один раз. Повторные начисления защищены на уровне базы данных.

### Технические примечания
- Источники данных: профиль пользователя, история ставок и реферальные связи.
- Кэширование: на клиенте применяется ETag/If-None-Match (низкая нагрузка сети), на сервере — умные кеши агрегатов по ставкам.

---

## Предложения новых достижений (для внедрения)

Ниже — 10 идей, фокус на функциональности приложения вне прямых ставок/прогнозов: лидерборд, магазин, чекины, профиль и «возраст» аккаунта. Все метрики доступны из уже имеющихся данных (leaderboard snapshots, shop orders, check-ins, профиль пользователя).

1) Топ недели (lb_top_weekly)
- Пороговые уровни: место в недельном лидерборде ≤100 / ≤20 / ≤3
- Методика расчёта: по еженедельному snapshot таблицы предикторов определить позицию пользователя (по user_id). Если позиция попадает в порог — засчитать уровень.
- Описание: награда за попадание в верхушку таблицы недели.

2) Постоянство в топе (lb_weeks_top)
- Пороговые уровни: 3 / 8 / 20 разных недель подряд в топ‑100
- Методика расчёта: по историческим weekly snapshots посчитать число последовательных недель, где ранк ≤100.
- Описание: за стабильное удержание места в топе.

3) Камбэк (lb_improvement)
- Пороговые уровни: улучшение позиции на ≥200 / ≥500 / ≥1000 мест за одну неделю
- Методика расчёта: сравнить позиции пользователя в двух соседних weekly snapshots; положительная дельта ≥ порога — засчитать.
- Описание: отмечает стремительный прогресс по сравнению с предыдущей неделей.

4) Покупатель (shop_orders_count)
- Пороговые уровни: 1 / 3 / 10 успешных заказов в магазине
- Методика расчёта: по таблице заказов (успешные статусы) посчитать количество заказов пользователя.
- Описание: за первые покупки и регулярность в магазине.

5) Растратчик (shop_spent_total)
- Пороговые уровни: суммарно потрачено 10 000 / 50 000 / 200 000 кредитов
- Методика расчёта: сумма `order.total_credits` по успешным заказам пользователя.
- Описание: за поддержку внутриигровой экономики.

6) Коллекционер (shop_collector)
- Пороговые уровни: 3 / 7 / 15 уникальных товаров в инвентаре
- Методика расчёта: по историям покупок посчитать число разных `product_id` (или категорий, если они заданы) у пользователя.
- Описание: за разнообразие приобретений.

7) Профиль завершён (profile_complete)
- Пороговые уровни: заполнено 1 / 2 / 3 ключевых атрибута профиля
- Методика расчёта: проверять наличие аватара, выбранной любимой команды и активной темы; считать количество заполненных из списка [avatar, favoriteTeam, theme].
- Описание: поощряет персонализацию профиля.

8) Чекин‑энтузиаст (checkins_total)
- Пороговые уровни: 10 / 30 / 100 чекинов
- Методика расчёта: по журналу чек‑инов посчитать общее количество отметок пользователя.
- Описание: за регулярные посещения с явным чек‑ином.

9) Жаворонок (checkin_early)
- Пороговые уровни: 5 / 20 / 50 чекинов до 09:00 (локальное время)
- Методика расчёта: по времени чек‑инов фильтровать отметки, совершённые до 09:00, и считать их количество.
- Описание: награда для ранних пользователей.

10) Ветеран (account_age)
- Пороговые уровни: 30 / 180 / 365 дней со дня регистрации
- Методика расчёта: текущая дата − `user.created_at` ≥ порога; фиксировать максимальный достигнутый тир.
- Описание: юбилейные достижения для «старожилов» Лиги.

Примечание по данным и совместимости:
- Лидерборд: опираться на weekly snapshots (см. `services/snapshots.py`), ключи кэша вида `lb:predictors:week:<YYYY-WW>`.
- Магазин: данные из `services/shop_helpers.py`/таблиц заказов; учитывать только успешные статусы.
- Чекин: использовать журнал чек‑инов (который уже задействован в `profile-checkin.js`); хранить отметки с таймзоной пользователя.
- Профиль: поля `avatar`, `favoriteTeam`, `theme` доступны на клиенте и/или в профиле пользователя; валидация — серверная.
