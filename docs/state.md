# –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å—Ç–æ—Ä (—ç—Ç–∞–ø 1)

–¶–µ–ª—å: –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–µ–∑ –±–∞–Ω–¥–ª–µ—Ä–∞, –Ω–∞ Vanilla JS. –í —ç—Ç–æ–º —ç—Ç–∞–ø–µ –≤–Ω–µ–¥—Ä—ë–Ω –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å—Ç–æ—Ä —Å –ø—Ä–æ—Å—Ç—ã–º —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º API –∏ —á–∞—Å—Ç–∏—á–Ω–æ–π –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ü–∏–µ–π.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ª—ë–≥–∫–∏–π —Å—Ç–æ—Ä –Ω–∞ —Å–æ–±—ã—Ç–∏—è—Ö (subscribe/notify), –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
- –§–∞–π–ª—ã:
  - `static/js/store/core.js` ‚Äî —è–¥—Ä–æ —Å—Ç–æ—Ä–∞: createStore, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ü–∏—è (LocalStorage, TTL), —ç–∫—Å–ø–æ—Ä—Ç –≤ `window.Store`.
  - `static/js/store/app.js` ‚Äî —Å—Ä–µ–∑ app: `ready`, `startedAt` (–Ω–µ –ø–µ—Ä—Å–∏—Å—Ç–∏—Ç—Å—è).
  - `static/js/store/user.js` ‚Äî —Å—Ä–µ–∑ user: `id`, `name`, `role`, `flags` (persist, TTL=7d).
  - `static/js/store/ui.js` ‚Äî —Å—Ä–µ–∑ ui: `activeTab`, `theme`, `modals` (—á–∞—Å—Ç–∏—á–Ω–æ persist, TTL=14d).
 - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ —à–∞–±–ª–æ–Ω: `templates/index.html` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é dist-first:
   - –µ—Å–ª–∏ –±—Ä–∞—É–∑–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç ES‚Äë–º–æ–¥—É–ª–∏ (feature-detect), –±–∞–∑–æ–≤—ã–µ —Å—Ä–µ–∑—ã (`dist/store/core.js`, `app.js`, `user.js`, `ui.js`) –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫–∞–∫ –º–æ–¥—É–ª–∏ (`type="module"`);
   - –µ—Å–ª–∏ –º–æ–¥—É–ª–µ–π –Ω–µ—Ç –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª dist –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è ‚Äî –ø–æ—Ñ–∞–π–ª–æ–≤—ã–π fallback –Ω–∞ `static/js/store/*.js` (legacy);
   - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ä–µ–∑—ã (`realtime`, `league`, `matches`, `odds`, `predictions`, `shop`, `profile`) –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏–∑ `dist/store/` —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ –º–æ–¥—É–ª–µ–π (–∏—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ).
 - –°–±–æ—Ä–∫–∞ TypeScript: –Ω–∞ —ç—Ç–∞–ø–µ Render build –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `npx tsc -p tsconfig.json`. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ Node –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –æ–Ω —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ build –∏ –∑–∞—Ç–µ–º –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è `tsc`. –ï—Å–ª–∏ dist –ø–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ –Ω–µ —Å–æ–±—Ä–∞–Ω ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ legacy JS (fallback —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è).

–ü—Ä–æ–≤–µ—Ä–∫–∞:
- –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö –≤ DevTools ‚Üí Network –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ `/static/js/dist/store/*.js` (—Ç–∏–ø: module). –í —Å—Ä–µ–¥–∞—Ö –±–µ–∑ –º–æ–¥—É–ª–µ–π —ç—Ç–∏ –∑–∞–ø—Ä–æ—Å—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç ‚Äî —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∞–∫—Ç–∏–≤–µ–Ω fallback –∏ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.

## –ü—É–±–ª–∏—á–Ω—ã–π API

–û–±—â–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å—Ç–æ—Ä–∞:
- `const s = Store.createStore(name, initialState, { persistKey?, persistPaths?, ttlMs? })`
- –ú–µ—Ç–æ–¥—ã: `s.get()`, `s.set(partial)`, `s.update(mutator)`, `s.subscribe(fn)`
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: `Store._stores[name]` –∏ `Store.getStore(name)`

–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ä–µ–∑—ã:
- `window.AppStore` ‚Äî —Ñ–ª–∞–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `window.UserStore` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (persist)
- `window.UIStore` ‚Äî UI (—á–∞—Å—Ç–∏—á–Ω—ã–π persist) + —É–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã: `setActiveTab(tab)`, `setTheme(theme)`

## –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ü–∏—è

- –¢–æ–ª—å–∫–æ whitelisted –ø–æ–ª—è (`persistPaths`) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ LocalStorage
- –ó–∞–ø–∏—Å—å —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è —Ç–∞–π–º—à—Ç–∞–º–ø–æ–º `__ts`, TTL –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –≥–∏–¥—Ä–∞—Ü–∏–∏
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –≤ user-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã/—Ç–æ–∫–µ–Ω—ã

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º (–¥–∞–ª—å—à–µ –ø–æ roadmap)

- –°–µ—Ç—å/–∫—ç—à: –≤ `etag-fetch.js` –¥–æ–±–∞–≤–∏—Ç—å —Ö—É–∫–∏ `onSuccess`, `onStale` –∏ –¥–∏—Å–ø–∞—Ç—á–∏—Ç—å –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–æ—Ä—ã (league/matches/predictions) ‚Äî –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–¥–∞—á–∞—Ö
- –†–µ–∞–ª—Ç–∞–π–º: `realtime-updates.js` –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏—è –≤ —Å—Ç–æ—Ä ‚Äî –ø–æ—Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø
- –ú–æ–¥—É–ª–∏ UI: –∑–∞–º–µ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö Maps –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏–∑ —Å—Ç–æ—Ä–∞ –∏ –ø–æ–¥–ø–∏—Å–∫–∏ (–ø–æ —á–∞—Å—Ç—è–º, –ø–æ–¥ —Ñ–∏—á–∞-—Ñ–ª–∞–≥–æ–º)

## –í–ª–∏—è–Ω–∏–µ –Ω–∞ –º–µ—Ç—Ä–∏–∫–∏

- Tech Stability: üî¥ ‚Äî –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã —Å–Ω–∏–∂–∞–µ—Ç –±–∞–≥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏ —Ä–∞–∑—ä–µ–∑–¥—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π
- Engagement: üîµ ‚Äî –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ ¬´–º–∏–≥–∞–Ω–∏–π¬ª –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞—Ö –≤–∫–ª–∞–¥–æ–∫
- Retention: ‚ö™ ‚Äî –∫–æ—Å–≤–µ–Ω–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ —á–µ—Ä–µ–∑ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
- Revenue: ‚ö™ ‚Äî –±–µ–∑ –ø—Ä—è–º–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Å—Ä–µ–∑–æ–≤ (`league`, `matches`, `odds`, `predictions`, `shop`, `profile`, `realtime`) –¥–æ–ø–æ–ª–Ω—è–π—Ç–µ —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç: –ø–æ–ª—è, persistPaths, TTL, —Å–æ–±—ã—Ç–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, —Ç–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (HTTP/WS).

---

## –ù–æ–≤—ã–µ —Å—Ä–µ–∑—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è (TS)

- league (no persist)
  - state: `{ table: any[]; stats: any[]; schedule: { tours: any[]; lastUpdated: number|null; etag?: string|null } }`
  - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏–∑: etag-fetch (schedule/table/stats), WS –ø–∞—Ç—á–∏

- matches (no persist)
  - state: `{ map: Record<string, { info: MatchInfo|null; score: MatchScore|null; events: MatchEvent[]; lastUpdated: number|null }> }`
  - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏–∑: etag-fetch (–¥–µ—Ç–∞–ª–∏ –º–∞—Ç—á–∞), WS —Å–æ–±—ã—Ç–∏—è (–≥–æ–ª—ã, –∫–∞—Ä—Ç–æ—á–∫–∏, —Ç–∞–π–º–µ—Ä)

- odds (no persist)
  - state: `{ map: Record<string, { value: number; version: number; lastUpdated: number }> }`
  - –∫–ª—é—á–∏: `"<matchId>|1x2|home|draw|away"`, `"<matchId>|totals|over|<line>"`, `"<matchId>|totals|under|<line>"`, `"<matchId>|penalty|yes|no"`, `"<matchId>|redcard|yes|no"`
  - `<matchId>` —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ `home_away_YYYY-MM-DD`
  - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏–∑: etag-fetch (–ø—Ä–µ–¥–∏–∫—à–µ–Ω—ã) + WS –ø–∞—Ç—á–∏ (—Å—Ö–µ–º–∞ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞)

- predictions (no persist)
  - state: `{ items: PredictionItem[]; myVotes: Record<string, any>; ttl: number|null }`
  - items: –º–∞—Å—Å–∏–≤ –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä—ã–Ω–∫–æ–≤ –ø–æ –º–∞—Ç—á–∞–º (`{ id, matchId, market: 'available', options: [...] }`)
  - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏–∑: etag-fetch (—Å–ø–∏—Å–∫–∏), –ª–æ–∫–∞–ª—å–Ω–æ: –∫—ç—à myVotes —Å TTL (–ø–µ—Ä–µ–∑–∞–ø—Ä–æ—Å –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏)

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ETag/WS ‚Üí Store (—Å–≤–æ–¥–∫–∞):
- predictions.js —Ç–µ–ø–µ—Ä—å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ `/api/betting/tours` –æ–±–Ω–æ–≤–ª—è–µ—Ç OddsStore –∏ PredictionsStore
- realtime-updates.js –¥–∏—Å–ø–∞—Ç—á–∏—Ç `bettingOddsUpdate` –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI; –ø–æ—Å–ª–µ–¥—É—é—â–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ OddsStore –≤–æ–∑–º–æ–∂–Ω–∞ (–ø–æ–¥ —Ñ–∏—á–∞-—Ñ–ª–∞–≥)
 - realtime (store) –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —Å–æ–±—ã—Ç–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è/–ø–æ–¥–ø–∏—Å–æ–∫ –∏ –æ—Ç—Ä–∞–∂–∞—Ç—å –∏—Ö –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ (`connected`, `topics`, `reconnects`) –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –ø–æ–¥–ø–∏—Å–æ–∫ UI (—ç—Ç–∞–ø 1. –∞–¥–∞–ø—Ç–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
 - ETag –∞–¥–∞–ø—Ç–µ—Ä: `etag-fetch.js` —Ç–µ–ø–µ—Ä—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —ç–º–∏—Ç–∏—Ç `window`-—Å–æ–±—ã—Ç–∏—è `etag:success`/`etag:stale` —Å detail `{ cacheKey, data, etag, fromCache, updated, raw }` ‚Äî —ç—Ç–æ –Ω–µ –º–µ–Ω—è–µ—Ç —Ç–µ–∫—É—â–∏–π API, –Ω–æ –¥–∞—ë—Ç –µ–¥–∏–Ω—ã–π –∫–∞–Ω–∞–ª –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞ –≤ —Å—Ç–æ—Ä.
 - –ü–µ—Ä–≤—ã–π —Å–ª—É—à–∞—Ç–µ–ª—å: `static/js/store/etl_listeners.ts` (dist) –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ `etag:success` –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç `LeagueStore.schedule` –¥–ª—è `cacheKey = "league:schedule"`. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø–æ—Å–ª–µ –±–∞–∑–æ–≤—ã—Ö —Å—Ä–µ–∑–æ–≤.
 - WS —Å–æ–±—ã—Ç–∏–π–Ω–∞—è —à–∏–Ω–∞: `realtime-updates.js` —ç–º–∏—Ç–∏—Ç `ws:connected`, `ws:disconnected`, `ws:topic_update`, `ws:data_patch`, `ws:odds` (detail ‚Äî –ø–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ —Å–æ–±—ã—Ç–∏—è).
 - WS —Å–ª—É—à–∞—Ç–µ–ª—å: `static/js/store/ws_listeners.ts` (dist) –æ–±–Ω–æ–≤–ª—è–µ—Ç `RealtimeStore` –ø–æ —Å–æ–±—ã—Ç–∏—è–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è/—Ç–æ–ø–∏–∫–æ–≤ –∏ –º–∞–ø–ø–∏—Ç `ws:odds` –≤ `OddsStore` —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –≤–µ—Ä—Å–∏–π.
 - WS —Å–ª—É—à–∞—Ç–µ–ª—å: `static/js/store/ws_listeners.ts` (dist) –æ–±–Ω–æ–≤–ª—è–µ—Ç `RealtimeStore` –ø–æ —Å–æ–±—ã—Ç–∏—è–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è/—Ç–æ–ø–∏–∫–æ–≤, –º–∞–ø–ø–∏—Ç `ws:odds` –≤ `OddsStore` (—Å –∑–∞—â–∏—Ç–æ–π –æ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –≤–µ—Ä—Å–∏–π) –∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç `ws:data_patch` –ø–æ —Å—É—â–Ω–æ—Å—Ç—è–º `match`/`match_events` –≤ `MatchesStore` (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç–∞ –∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–æ–±—ã—Ç–∏–π –±–µ–∑ –¥—É–±–ª–µ–π).

- shop (persist)
  - state: `{ cart: ShopCartItem[]; orders: ShopOrder[]; products: ShopProduct[]; ttl: number|null; lastCartUpdate: number|null; lastOrdersUpdate: number|null }`
  - persistPaths: `["cart","orders","ttl","lastCartUpdate","lastOrdersUpdate"]`, TTL: 14d
  - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏–∑: UI-–¥–µ–π—Å—Ç–≤–∏–π –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π API
  - –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –º–∏–≥—Ä–∏—Ä—É–µ—Ç —Å—Ç–∞—Ä—É—é –∫–æ—Ä–∑–∏–Ω—É –∏–∑ `localStorage['shop:cart']`, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏, —Ç–∏–ø–∏–∑–∞—Ü–∏—é TypeScript
  - Feature flag: `localStorage['feature:shop_ui_store'] = '1'` –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ UI

- profile (no persist)
  - state: `{ achievements: Achievement[]; badges: string[]; lastUpdated: number|null }`
  - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏–∑: etag-fetch (–ø—Ä–æ—Ñ–∏–ª—å/–∞—á–∏–≤–∫–∏)

- realtime (no persist)
  - state: `{ connected: boolean; topics: string[]; reconnects: number }`
  - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏–∑: realtime-updates.js (—Å–æ–±—ã—Ç–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è/–ø–æ–¥–ø–∏—Å–∫–∏)

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã `MatchInfo`, `MatchScore`, `PredictionItem`, `Achievement`, `ShopCartItem`, `ShopOrder` ‚Äî –∑–∞–¥–∞–Ω—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö `.ts` –∏ –º–æ–≥—É—Ç —É—Ç–æ—á–Ω—è—Ç—å—Å—è –ø–æ –º–µ—Ä–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å API.

## –õ—ë–≥–∫–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä realtime-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

- –§–∞–π–ª —Å—Ç–∏–ª–µ–π: `static/css/realtime-indicator.css`
- –ú–æ–¥—É–ª—å: `static/js/store/realtime_indicator.ts` (–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫–∞–∫ `dist/store/realtime_indicator.js`)
- –ü–æ–≤–µ–¥–µ–Ω–∏–µ: –º–∞–ª–µ–Ω—å–∫–∞—è —Ç–æ—á–∫–∞ –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É, —Ü–≤–µ—Ç–æ–º –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ WS (—Å–µ—Ä—ã–π ‚Äî –æ—Ñ—Ñ–ª–∞–π–Ω, –∑–µ–ª—ë–Ω—ã–π ‚Äî –æ–Ω–ª–∞–π–Ω). –ù–µ –º–µ—à–∞–µ—Ç UI, –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è screen readers (`role="status"`, `aria-live="polite"`). –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ —Å–æ `RealtimeStore.connected`, —Ç–∞–∫ –∏ –Ω–∞–ø—Ä—è–º—É—é —Å —Å–æ–±—ã—Ç–∏—è–º–∏ `ws:connected/ws:disconnected` –≤ —Å—Ä–µ–¥–∞—Ö –±–µ–∑ —Å—Ç–æ—Ä–∞.

## –ü–æ–¥–ø–∏—Å–∫–∞ UI –¥–µ—Ç–∞–ª–µ–π –º–∞—Ç—á–∞ –Ω–∞ MatchesStore (feature-flag)

- –ú–æ–¥—É–ª—å: `static/js/store/match_ui_bindings.ts` (–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫–∞–∫ `dist/store/match_ui_bindings.js`)
- –í–∫–ª—é—á–µ–Ω–∏–µ: –ø–æ—Å—Ç–∞–≤—å—Ç–µ –≤ `localStorage` –∫–ª—é—á `feature:match_ui_store` = `1`
- –ß—Ç–æ –¥–µ–ª–∞–µ—Ç: –∫–æ–≥–¥–∞ –æ—Ç–∫—Ä—ã—Ç —ç–∫—Ä–∞–Ω –¥–µ—Ç–∞–ª–µ–π –º–∞—Ç—á–∞ (`#ufo-match-details`), –º–æ–¥—É–ª—å –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ `MatchesStore` –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—á—ë—Ç –≤ `#md-score` –ø–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –∏–∑ WS/ETag. –°–æ–±—ã—Ç–∏—è –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Å—Ç–∞—é—Ç—Å—è –ø–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Ç–µ–∫—É—â–∏—Ö –º–æ–¥—É–ª–µ–π (`profile-match-roster-events.js`, `profile-match-stats.js`) –∏ —É–∂–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ WS (–±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è/–ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞ –≤ —Å—Ç–æÃÅ—Ä-–±–∏–Ω–¥–∏–Ω–≥–∞—Ö).
- –§–ª–∞–≥ —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (–µ—Å–ª–∏ –Ω–µ—Ç `?ff=0`).
- –û—Ç–∫–ª—é—á–∏—Ç—å –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ `?ff=0` –≤ URL.

## Store ‚Üí Legacy Bridge (—Å–æ–±—ã—Ç–∏—è/—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–µ–∑ fetch)

- –ú–æ–¥—É–ª—å: `static/js/store/match_legacy_bridge.ts`
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: —Ç—Ä–∞–Ω—Å–ª–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è `MatchesStore` –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ legacy –º–µ—Ö–∞–Ω–∏–∑–º—ã –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤.
  - –î–ª—è –≤–∫–ª–∞–¥–æ–∫ ¬´–ö–æ–º–∞–Ω–¥–∞ 1/–ö–æ–º–∞–Ω–¥–∞ 2¬ª: –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `matchDetailsUpdate` —Å –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª–µ–º `events` (—Ñ–æ—Ä–º–∞—Ç `{home:[],away:[]}`) ‚Äî legacy –º–æ–¥—É–ª—å `profile-match-roster-events.js` —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –∏ –ø–µ—Ä–µ—Ä–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∏–∫–æ–Ω–∫–∏.
  - –î–ª—è ¬´–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞¬ª: –º—è–≥–∫–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç `window.MatchStats.render`, —á—Ç–æ–±—ã –±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ —Å—Ç–æ—Ä–∞ (`entry.stats.home / entry.stats.away`) –∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ fetch. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ (debounce ~120ms) –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–æ—Ä–∞.
- –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è: —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ (score + –¥–ª–∏–Ω–∞ events + hash stats) –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ª–∏—à–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è.
- –û—Ç–∫–∞—Ç: –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `?ff=0` –∫ URL ‚Äî —Ñ–ª–∞–≥ —É–¥–∞–ª–∏—Ç—Å—è –∏ –º–æ—Å—Ç –Ω–µ –±—É–¥–µ—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω.
- –ü–æ–∏—Å–∫ —Ç–µ–∫—É—â–µ–≥–æ –º–∞—Ç—á–∞: –ø–æ —Ç–µ–∫—Å—Ç–∞–º –≤ `#md-home-name`/`#md-away-name` —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å–∏ –∏–∑ `MatchesStore.map` –∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –ø–æ `lastUpdated`.

## Shop –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ —Å—Ç–æ—Ä–æ–º (–≠—Ç–∞–ø 5 –∑–∞–≤–µ—Ä—à–µ–Ω)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Shop —Å—Ç–æ—Ä–∞

- **ShopStore** (`static/js/store/shop.ts`): —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω–æ–π –∏ –∑–∞–∫–∞–∑–∞–º–∏
- **ShopHelpers** (–≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏): API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ—Ä–∑–∏–Ω–æ–π, –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤
- **shop_ui_bindings.ts**: —Ä–µ–∞–∫—Ç–∏–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è UI –ø–æ–¥ feature flag `feature:shop_ui_store`
- **shop_validators.ts**: –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –∫–æ—Ä–∑–∏–Ω—É –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ `localStorage['shop:cart']`
2. **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ü–∏—è**: –∫–æ—Ä–∑–∏–Ω–∞ –∏ –∑–∞–∫–∞–∑—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å TTL 14 –¥–Ω–µ–π
3. **–í–∞–ª–∏–¥–∞—Ü–∏–∏**: 
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (1-99), —Ü–µ–Ω—ã, –Ω–∞–∑–≤–∞–Ω–∏–π —Ç–æ–≤–∞—Ä–æ–≤
   - –õ–∏–º–∏—Ç—ã –∫–æ—Ä–∑–∏–Ω—ã (–º–∞–∫—Å–∏–º—É–º 50 —Ç–æ–≤–∞—Ä–æ–≤, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ 999999)
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞
4. **–†–µ–∞–∫—Ç–∏–≤–Ω—ã–π UI**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã, badge –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, —Å–ø–∏—Å–∫–∞ –∑–∞–∫–∞–∑–æ–≤
5. **API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ø–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å `/api/shop/checkout` –∏ `/api/shop/my-orders`

### Feature flag –∞–∫—Ç–∏–≤–∞—Ü–∏—è

```javascript
localStorage.setItem('feature:shop_ui_store', '1');
```

–ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ —Ñ–ª–∞–≥–∞:
- UI –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ—Ä–∑–∏–Ω–æ–π
- Vanilla JS —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Å—Ç–∞—é—Ç—Å—è –∫–∞–∫ fallback
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –í–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–∏ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å `window.Shop` API –∏–∑ `shop.js`
- **ShopHelpers** —Ä–∞—Å—à–∏—Ä—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—è–º–∏
- **–†–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** —á–µ—Ä–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Å—Ç–æ—Ä
- **Graceful degradation** –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å—Ç–æ—Ä–∞

–≠—Ç–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é Shop –º–æ–¥—É–ª—è —Å–æ–≥–ª–∞—Å–Ω–æ roadmap —ç—Ç–∞–ø 5.

---

## Profile Store (–ù–û–í–û–ï)

–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ü–∏–µ–π –Ω–∞—Å—Ç—Ä–æ–µ–∫.

### –°–æ—Å—Ç–æ—è–Ω–∏–µ

```typescript
interface ProfileState {
  // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
  achievements: Achievement[];
  badges: string[];
  achievementsLastUpdated: number | null;
  
  // –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  user: UserProfile;
  userLastUpdated: number | null;
  
  // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–µ—Ä—Å–∏—Å—Ç—è—Ç—Å—è)
  settings: UserSettings;
  settingsLastUpdated: number | null;
  
  // –î–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥ (–∫—ç—à —Å TTL)
  teams: TeamData;
  
  // –û–±—â–∏–µ –º–µ—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏
  lastUpdated: number | null;
}
```

### –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ü–∏—è

- **persistPaths**: `["settings", "settingsLastUpdated"]`
- **TTL**: 14 –¥–Ω–µ–π
- **localStorage –∫–ª—é—á**: `profile:state:v1`

–¢–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏. –î–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ.

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ API –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π**:
   - `updateAchievements()` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `profile-achievements.js` —á–µ—Ä–µ–∑ –∞–¥–∞–ø—Ç–µ—Ä
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (—Ç–∏—Ä—Ä—ã, –ø—Ä–æ–≥—Ä–µ—Å—Å, –∏–∫–æ–Ω–∫–∏)

2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏**:
   - `updateUser()` ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è (–∫—Ä–µ–¥–∏—Ç—ã, —É—Ä–æ–≤–µ–Ω—å, XP, —á–µ–∫–∏–Ω—ã)
   - `setFavoriteTeam()` ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª—é–±–∏–º–æ–π –∫–æ–º–∞–Ω–¥—ã –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
   - `updateCheckin()` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ —á–µ–∫–∏–Ω–∞

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∞–≤—Ç–æ–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ü–∏–µ–π**:
   - `updateSettings()` ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, —Ç–µ–º—ã, —è–∑—ã–∫–∞
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
   - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

4. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ —Å TTL**:
   - `updateTeams()` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –±–æ–ª–µ–ª—å—â–∏–∫–æ–≤
   - `withTeamCount()` ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π –∫–æ–º–∞–Ω–¥ —Å —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å—é
   - `isTeamsDataFresh()` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ (5 –º–∏–Ω—É—Ç)

5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ–∫–∏–Ω–∞**:
   - `canCheckin()` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ —á–µ–∫–∏–Ω–∞
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–æ—Ä–∞ –ø–æ—Å–ª–µ —á–µ–∫–∏–Ω–∞

### Feature flag –∞–∫—Ç–∏–≤–∞—Ü–∏—è

```javascript
localStorage.setItem('feature:profile_store', '1');
```

–ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ —Ñ–ª–∞–≥–∞ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∞–¥–∞–ø—Ç–µ—Ä—ã:
- `profile_achievements_adapter.js` ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- `profile_user_adapter.js` ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö  
- `profile_core_adapter.js` ‚Äî –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏

### –ê–¥–∞–ø—Ç–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

#### 1. Achievements Adapter
- –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç `ProfileAchievements.fetchAchievements()` –¥–ª—è —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π —Å TTL 30 —Å–µ–∫—É–Ω–¥
- –†–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–æ—Ä–∞
- –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º UI —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º

#### 2. User Adapter  
- –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç `ProfileUser.fetchUserData()` –¥–ª—è —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö —Å TTL 1 –º–∏–Ω—É—Ç–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤—ã–±–æ—Ä–æ–º –ª—é–±–∏–º–æ–π –∫–æ–º–∞–Ω–¥—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ–∫–∏–Ω–∞

#### 3. Core Adapter
- –ó–∞–º–µ–Ω—è–µ—Ç –ª–æ–≥–∏–∫—É `ProfileCore.init()` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–æ—Ä–∞
- –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏—è `app:data-ready` –∏ `app:all-ready`
- –£–±–∏—Ä–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –∑–∞–≥—Ä—É–∑–∫–∏

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

- **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥—É–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ —Ñ–ª–∞–≥–∞
- **Graceful enhancement**: —Å—Ç–æ—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –±–µ–∑ –ª–æ–º–∞—é—â–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: UI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ —Å—Ç–æ—Ä–µ
- **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ü–∏—è**: –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏

### –õ–æ–≥–∏–∫–∞ –î–û/–ü–û–°–õ–ï

**–î–û (–±–µ–∑ —Å—Ç–æ—Ä–∞)**:
- –î–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è —Ö—Ä–∞–Ω–∏–ª–∏—Å—å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º–æ–¥—É–ª—è—Ö (`profile-*.js`)
- –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –∏–º–µ–ª —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –ª–æ–≥–∏–∫—É –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ `profile-core.js`

**–ü–û–°–õ–ï (—Å–æ —Å—Ç–æ—Ä–æ–º)**:
- –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –≤ `ProfileStore`
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å TTL
- –ê–≤—Ç–æ–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ –∞–¥–∞–ø—Ç–µ—Ä—ã
- –†–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI

–≠—Ç–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –∑–∞–¥–∞—á—É **Profile —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏** —Å–æ–≥–ª–∞—Å–Ω–æ roadmap —ç—Ç–∞–ø 5.
