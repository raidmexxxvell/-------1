# –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å—Ç–æ—Ä (—ç—Ç–∞–ø 1)

–¶–µ–ª—å: –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–µ–∑ –±–∞–Ω–¥–ª–µ—Ä–∞, –Ω–∞ Vanilla JS. –í —ç—Ç–æ–º —ç—Ç–∞–ø–µ –≤–Ω–µ–¥—Ä—ë–Ω –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å—Ç–æ—Ä —Å –ø—Ä–æ—Å—Ç—ã–º —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º API –∏ —á–∞—Å—Ç–∏—á–Ω–æ–π –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ü–∏–µ–π.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ª—ë–≥–∫–∏–π —Å—Ç–æ—Ä –Ω–∞ —Å–æ–±—ã—Ç–∏—è—Ö (subscribe/notify), –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
- –§–∞–π–ª—ã:
  - `static/js/store/core.js` ‚Äî —è–¥—Ä–æ —Å—Ç–æ—Ä–∞: createStore, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ü–∏—è (LocalStorage, TTL), —ç–∫—Å–ø–æ—Ä—Ç –≤ `window.Store`.
  - `static/js/store/app.js` ‚Äî —Å—Ä–µ–∑ app: `ready`, `startedAt` (–Ω–µ –ø–µ—Ä—Å–∏—Å—Ç–∏—Ç—Å—è).
  - `static/js/store/user.js` ‚Äî —Å—Ä–µ–∑ user: `id`, `name`, `role`, `flags` (persist, TTL=7d).
  - `static/js/store/ui.js` ‚Äî —Å—Ä–µ–∑ ui: `activeTab`, `theme`, `modals` (—á–∞—Å—Ç–∏—á–Ω–æ persist, TTL=14d).
 - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ —à–∞–±–ª–æ–Ω: `templates/index.html` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é dist-first:
   - –µ—Å–ª–∏ –±—Ä–∞—É–∑–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç ES‚Äë–º–æ–¥—É–ª–∏ (feature-detect), –±–∞–∑–æ–≤—ã–µ —Å—Ä–µ–∑—ã (`dist/store/core.js`, `app.js`, `user.js`, `ui.js`) –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫–∞–∫ –º–æ–¥—É–ª–∏ (`type="module"`);
   - –µ—Å–ª–∏ –º–æ–¥—É–ª–µ–π –Ω–µ—Ç –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª dist –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è ‚Äî –ø–æ—Ñ–∞–π–ª–æ–≤—ã–π fallback –Ω–∞ `static/js/store/*.js` (legacy);
   - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ä–µ–∑—ã (`realtime`, `league`, `matches`, `odds`, `predictions`, `shop`, `profile`) –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏–∑ `dist/store/` —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ –º–æ–¥—É–ª–µ–π (–∏—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ).
 - –°–±–æ—Ä–∫–∞ TypeScript: –Ω–∞ —ç—Ç–∞–ø–µ Render build –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `npx tsc -p tsconfig.json`. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ Node –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –æ–Ω —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ build –∏ –∑–∞—Ç–µ–º –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è `tsc`. –ï—Å–ª–∏ dist –ø–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ –Ω–µ —Å–æ–±—Ä–∞–Ω ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ legacy JS (fallback —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è).

–ü—Ä–æ–≤–µ—Ä–∫–∞:
- –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö –≤ DevTools ‚Üí Network –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ `/static/js/dist/store/*.js` (—Ç–∏–ø: module). –í —Å—Ä–µ–¥–∞—Ö –±–µ–∑ –º–æ–¥—É–ª–µ–π —ç—Ç–∏ –∑–∞–ø—Ä–æ—Å—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç ‚Äî —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∞–∫—Ç–∏–≤–µ–Ω fallback –∏ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.

## –ü—É–±–ª–∏—á–Ω—ã–π API

–û–±—â–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å—Ç–æ—Ä–∞:
- `const s = Store.createStore(name, initialState, { persistKey?, persistPaths?, ttlMs? })`
- –ú–µ—Ç–æ–¥—ã: `s.get()`, `s.set(partial)`, `s.update(mutator)`, `s.subscribe(fn)`
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: `Store._stores[name]` –∏ `Store.getStore(name)`

–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ä–µ–∑—ã:
- `window.AppStore` ‚Äî —Ñ–ª–∞–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `window.UserStore` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (persist)
- `window.UIStore` ‚Äî UI (—á–∞—Å—Ç–∏—á–Ω—ã–π persist) + —É–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã: `setActiveTab(tab)`, `setTheme(theme)`

## –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ü–∏—è

- –¢–æ–ª—å–∫–æ whitelisted –ø–æ–ª—è (`persistPaths`) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ LocalStorage
- –ó–∞–ø–∏—Å—å —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è —Ç–∞–π–º—à—Ç–∞–º–ø–æ–º `__ts`, TTL –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –≥–∏–¥—Ä–∞—Ü–∏–∏
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –≤ user-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã/—Ç–æ–∫–µ–Ω—ã

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º (–¥–∞–ª—å—à–µ –ø–æ roadmap)

- –°–µ—Ç—å/–∫—ç—à: –≤ `etag-fetch.js` –¥–æ–±–∞–≤–∏—Ç—å —Ö—É–∫–∏ `onSuccess`, `onStale` –∏ –¥–∏—Å–ø–∞—Ç—á–∏—Ç—å –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–æ—Ä—ã (league/matches/predictions) ‚Äî –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–¥–∞—á–∞—Ö
- –†–µ–∞–ª—Ç–∞–π–º: `realtime-updates.js` –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏—è –≤ —Å—Ç–æ—Ä ‚Äî –ø–æ—Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø
- –ú–æ–¥—É–ª–∏ UI: –∑–∞–º–µ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö Maps –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏–∑ —Å—Ç–æ—Ä–∞ –∏ –ø–æ–¥–ø–∏—Å–∫–∏ (–ø–æ —á–∞—Å—Ç—è–º, –ø–æ–¥ —Ñ–∏—á–∞-—Ñ–ª–∞–≥–æ–º)

## –í–ª–∏—è–Ω–∏–µ –Ω–∞ –º–µ—Ç—Ä–∏–∫–∏

- Tech Stability: üî¥ ‚Äî –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã —Å–Ω–∏–∂–∞–µ—Ç –±–∞–≥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏ —Ä–∞–∑—ä–µ–∑–¥—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π
- Engagement: üîµ ‚Äî –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ ¬´–º–∏–≥–∞–Ω–∏–π¬ª –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞—Ö –≤–∫–ª–∞–¥–æ–∫
- Retention: ‚ö™ ‚Äî –∫–æ—Å–≤–µ–Ω–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ —á–µ—Ä–µ–∑ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
- Revenue: ‚ö™ ‚Äî –±–µ–∑ –ø—Ä—è–º–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Å—Ä–µ–∑–æ–≤ (`league`, `matches`, `odds`, `predictions`, `shop`, `profile`, `realtime`) –¥–æ–ø–æ–ª–Ω—è–π—Ç–µ —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç: –ø–æ–ª—è, persistPaths, TTL, —Å–æ–±—ã—Ç–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, —Ç–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (HTTP/WS).

---

## –ù–æ–≤—ã–µ —Å—Ä–µ–∑—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è (TS)

- league (no persist)
  - state: `{ table: any[]; stats: any[]; schedule: { tours: any[]; lastUpdated: number|null; etag?: string|null } }`
  - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏–∑: etag-fetch (schedule/table/stats), WS –ø–∞—Ç—á–∏

- matches (no persist)
  - state: `{ map: Record<string, { info: MatchInfo|null; score: MatchScore|null; events: MatchEvent[]; lastUpdated: number|null }> }`
  - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏–∑: etag-fetch (–¥–µ—Ç–∞–ª–∏ –º–∞—Ç—á–∞), WS —Å–æ–±—ã—Ç–∏—è (–≥–æ–ª—ã, –∫–∞—Ä—Ç–æ—á–∫–∏, —Ç–∞–π–º–µ—Ä)

- odds (no persist)
  - state: `{ map: Record<string, { value: number; version: number; lastUpdated: number }> }`
  - –∫–ª—é—á–∏: `"<matchId>|1x2|home|draw|away"`, `"<matchId>|totals|over|<line>"`, `"<matchId>|totals|under|<line>"`, `"<matchId>|penalty|yes|no"`, `"<matchId>|redcard|yes|no"`
  - `<matchId>` —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ `home_away_YYYY-MM-DD`
  - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏–∑: etag-fetch (–ø—Ä–µ–¥–∏–∫—à–µ–Ω—ã) + WS –ø–∞—Ç—á–∏ (—Å—Ö–µ–º–∞ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞)

- predictions (no persist)
  - state: `{ items: PredictionItem[]; myVotes: Record<string, any>; ttl: number|null }`
  - items: –º–∞—Å—Å–∏–≤ –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä—ã–Ω–∫–æ–≤ –ø–æ –º–∞—Ç—á–∞–º (`{ id, matchId, market: 'available', options: [...] }`)
  - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏–∑: etag-fetch (—Å–ø–∏—Å–∫–∏), –ª–æ–∫–∞–ª—å–Ω–æ: –∫—ç—à myVotes —Å TTL (–ø–µ—Ä–µ–∑–∞–ø—Ä–æ—Å –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏)

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ETag/WS ‚Üí Store (—Å–≤–æ–¥–∫–∞):
- predictions.js —Ç–µ–ø–µ—Ä—å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ `/api/betting/tours` –æ–±–Ω–æ–≤–ª—è–µ—Ç OddsStore –∏ PredictionsStore
- realtime-updates.js –¥–∏—Å–ø–∞—Ç—á–∏—Ç `bettingOddsUpdate` –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI; –ø–æ—Å–ª–µ–¥—É—é—â–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ OddsStore –≤–æ–∑–º–æ–∂–Ω–∞ (–ø–æ–¥ —Ñ–∏—á–∞-—Ñ–ª–∞–≥)
 - realtime (store) –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —Å–æ–±—ã—Ç–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è/–ø–æ–¥–ø–∏—Å–æ–∫ –∏ –æ—Ç—Ä–∞–∂–∞—Ç—å –∏—Ö –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ (`connected`, `topics`, `reconnects`) –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –ø–æ–¥–ø–∏—Å–æ–∫ UI (—ç—Ç–∞–ø 1. –∞–¥–∞–ø—Ç–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
 - ETag –∞–¥–∞–ø—Ç–µ—Ä: `etag-fetch.js` —Ç–µ–ø–µ—Ä—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —ç–º–∏—Ç–∏—Ç `window`-—Å–æ–±—ã—Ç–∏—è `etag:success`/`etag:stale` —Å detail `{ cacheKey, data, etag, fromCache, updated, raw }` ‚Äî —ç—Ç–æ –Ω–µ –º–µ–Ω—è–µ—Ç —Ç–µ–∫—É—â–∏–π API, –Ω–æ –¥–∞—ë—Ç –µ–¥–∏–Ω—ã–π –∫–∞–Ω–∞–ª –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞ –≤ —Å—Ç–æ—Ä.
 - –ü–µ—Ä–≤—ã–π —Å–ª—É—à–∞—Ç–µ–ª—å: `static/js/store/etl_listeners.ts` (dist) –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ `etag:success` –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç `LeagueStore.schedule` –¥–ª—è `cacheKey = "league:schedule"`. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø–æ—Å–ª–µ –±–∞–∑–æ–≤—ã—Ö —Å—Ä–µ–∑–æ–≤.
 - WS —Å–æ–±—ã—Ç–∏–π–Ω–∞—è —à–∏–Ω–∞: `realtime-updates.js` —ç–º–∏—Ç–∏—Ç `ws:connected`, `ws:disconnected`, `ws:topic_update`, `ws:data_patch`, `ws:odds` (detail ‚Äî –ø–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ —Å–æ–±—ã—Ç–∏—è).
 - WS —Å–ª—É—à–∞—Ç–µ–ª—å: `static/js/store/ws_listeners.ts` (dist) –æ–±–Ω–æ–≤–ª—è–µ—Ç `RealtimeStore` –ø–æ —Å–æ–±—ã—Ç–∏—è–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è/—Ç–æ–ø–∏–∫–æ–≤ –∏ –º–∞–ø–ø–∏—Ç `ws:odds` –≤ `OddsStore` —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –≤–µ—Ä—Å–∏–π.
 - WS —Å–ª—É—à–∞—Ç–µ–ª—å: `static/js/store/ws_listeners.ts` (dist) –æ–±–Ω–æ–≤–ª—è–µ—Ç `RealtimeStore` –ø–æ —Å–æ–±—ã—Ç–∏—è–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è/—Ç–æ–ø–∏–∫–æ–≤, –º–∞–ø–ø–∏—Ç `ws:odds` –≤ `OddsStore` (—Å –∑–∞—â–∏—Ç–æ–π –æ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –≤–µ—Ä—Å–∏–π) –∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç `ws:data_patch` –ø–æ —Å—É—â–Ω–æ—Å—Ç—è–º `match`/`match_events` –≤ `MatchesStore` (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç–∞ –∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–æ–±—ã—Ç–∏–π –±–µ–∑ –¥—É–±–ª–µ–π).

- shop (persist)
  - state: `{ cart: ShopCartItem[]; orders: ShopOrder[]; ttl: number|null }`
  - persistPaths: `["cart","orders","ttl"]`, TTL: 14d
  - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏–∑: UI-–¥–µ–π—Å—Ç–≤–∏–π –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π API

- profile (no persist)
  - state: `{ achievements: Achievement[]; badges: string[]; lastUpdated: number|null }`
  - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏–∑: etag-fetch (–ø—Ä–æ—Ñ–∏–ª—å/–∞—á–∏–≤–∫–∏)

- realtime (no persist)
  - state: `{ connected: boolean; topics: string[]; reconnects: number }`
  - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏–∑: realtime-updates.js (—Å–æ–±—ã—Ç–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è/–ø–æ–¥–ø–∏—Å–∫–∏)

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã `MatchInfo`, `MatchScore`, `PredictionItem`, `Achievement`, `ShopCartItem`, `ShopOrder` ‚Äî –∑–∞–¥–∞–Ω—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö `.ts` –∏ –º–æ–≥—É—Ç —É—Ç–æ—á–Ω—è—Ç—å—Å—è –ø–æ –º–µ—Ä–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å API.

## –õ—ë–≥–∫–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä realtime-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

- –§–∞–π–ª —Å—Ç–∏–ª–µ–π: `static/css/realtime-indicator.css`
- –ú–æ–¥—É–ª—å: `static/js/store/realtime_indicator.ts` (–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫–∞–∫ `dist/store/realtime_indicator.js`)
- –ü–æ–≤–µ–¥–µ–Ω–∏–µ: –º–∞–ª–µ–Ω—å–∫–∞—è —Ç–æ—á–∫–∞ –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É, —Ü–≤–µ—Ç–æ–º –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ WS (—Å–µ—Ä—ã–π ‚Äî –æ—Ñ—Ñ–ª–∞–π–Ω, –∑–µ–ª—ë–Ω—ã–π ‚Äî –æ–Ω–ª–∞–π–Ω). –ù–µ –º–µ—à–∞–µ—Ç UI, –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è screen readers (`role="status"`, `aria-live="polite"`). –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ —Å–æ `RealtimeStore.connected`, —Ç–∞–∫ –∏ –Ω–∞–ø—Ä—è–º—É—é —Å —Å–æ–±—ã—Ç–∏—è–º–∏ `ws:connected/ws:disconnected` –≤ —Å—Ä–µ–¥–∞—Ö –±–µ–∑ —Å—Ç–æ—Ä–∞.

## –ü–æ–¥–ø–∏—Å–∫–∞ UI –¥–µ—Ç–∞–ª–µ–π –º–∞—Ç—á–∞ –Ω–∞ MatchesStore (feature-flag)

- –ú–æ–¥—É–ª—å: `static/js/store/match_ui_bindings.ts` (–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫–∞–∫ `dist/store/match_ui_bindings.js`)
- –í–∫–ª—é—á–µ–Ω–∏–µ: –ø–æ—Å—Ç–∞–≤—å—Ç–µ –≤ `localStorage` –∫–ª—é—á `feature:match_ui_store` = `1`
- –ß—Ç–æ –¥–µ–ª–∞–µ—Ç: –∫–æ–≥–¥–∞ –æ—Ç–∫—Ä—ã—Ç —ç–∫—Ä–∞–Ω –¥–µ—Ç–∞–ª–µ–π –º–∞—Ç—á–∞ (`#ufo-match-details`), –º–æ–¥—É–ª—å –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ `MatchesStore` –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—á—ë—Ç –≤ `#md-score` –ø–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –∏–∑ WS/ETag. –°–æ–±—ã—Ç–∏—è –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Å—Ç–∞—é—Ç—Å—è –ø–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Ç–µ–∫—É—â–∏—Ö –º–æ–¥—É–ª–µ–π (`profile-match-roster-events.js`, `profile-match-stats.js`) –∏ —É–∂–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ WS (–±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è/–ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞ –≤ —Å—Ç–æÃÅ—Ä-–±–∏–Ω–¥–∏–Ω–≥–∞—Ö).
- –ë—ã—Å—Ç—Ä–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ Render –±–µ–∑ –∫–æ–Ω—Å–æ–ª–∏: –¥–æ–±–∞–≤—å—Ç–µ –∫ URL –ø–∞—Ä–∞–º–µ—Ç—Ä `?ff=1` –∏–ª–∏ `?feature:match_ui_store=1` (–≤ —Ç–æ–º —á–∏—Å–ª–µ –≤ hash). –î–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è: `?ff=0`.
- –ü–æ–∏—Å–∫ —Ç–µ–∫—É—â–µ–≥–æ –º–∞—Ç—á–∞: –ø–æ —Ç–µ–∫—Å—Ç–∞–º –≤ `#md-home-name`/`#md-away-name` —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å–∏ –∏–∑ `MatchesStore.map` –∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –ø–æ `lastUpdated`.
